# ===============
# Stockelper LLM
# ===============
#
# 사용 방법:
#   1) 이 파일을 `.env`로 복사한 뒤 값을 채우세요.
#   2) Docker 사용 시 compose의 env_file(.env)로 로드됩니다.
#

############################
# Server
############################
HOST=0.0.0.0
PORT=21009
DEBUG=false

############################
# Service
############################
STOCKELPER_SERVICE=chat
REQUESTS_TIMEOUT=300
DEBUG_ERRORS=false

############################
# AI / LLM
############################
OPENAI_API_KEY=
OPENROUTER_API_KEY=
# (선택) chat/해석 모델을 통일하려면 이 변수로 지정하세요.
# STOCKELPER_LLM_MODEL=gpt-5.1
# (선택) 백테스트 요청 파라미터 생성 모델
STOCKELPER_BACKTESTING_REQUEST_MODEL=
# (선택) 포트폴리오 추천 요청 파라미터 생성 모델
STOCKELPER_PORTFOLIO_REQUEST_MODEL=

############################
# External APIs (optional per tool)
############################
OPEN_DART_API_KEY=
YOUTUBE_API_KEY=

############################
# Databases (required)
############################
# stockelper_web DB (사용자/백테스트 결과/해석 저장)
# - 로컬 예) postgresql://postgres:postgres@localhost:5432/stockelper_web
# - compose 예) postgresql://postgres:postgres@db:5432/stockelper_web
DATABASE_URL=postgresql://postgres:postgres@db:5432/stockelper_web
# (선택) 미지정 시 DATABASE_URL을 asyncpg로 자동 변환
ASYNC_DATABASE_URL=

# (선택) LangGraph 체크포인터 DB
# - 미지정 시 DATABASE_URL(=stockelper_web)을 사용합니다.
CHECKPOINT_DATABASE_URI=

# (선택) KSIC(산업분류) DB
DATABASE_URL_KSIC=
ASYNC_DATABASE_URL_KSIC=

# stockelper_web 스키마/테이블
STOCKELPER_WEB_SCHEMA=public
STOCKELPER_BACKTESTING_TABLE=backtesting

############################
# External service URLs
############################
# 백테스팅 서비스(필수): 백테스트 트리거 + 결과 다운로드 + 해석
STOCKELPER_BACKTESTING_URL=http://localhost:21007
# (선택) 포트폴리오 추천 서비스
STOCKELPER_PORTFOLIO_URL=
PORTFOLIO_REQUESTS_TIMEOUT=300

############################
# Backtesting request planner (LLM preflight/guardrails)
############################
# 사용자가 기간을 말하지 않으면 최근 N년으로 기본 설정
STOCKELPER_BACKTEST_DEFAULT_YEARS=3
# 과도한 DB/연산을 막기 위해 최대 기간(년)을 제한(초과 시 자동 축소)
STOCKELPER_BACKTEST_MAX_YEARS=5
# 대상 종목 최대 개수 제한(과도한 요청 방지)
STOCKELPER_BACKTEST_MAX_TARGET_SYMBOLS=50
# (주의) 전체 유니버스 백테스트 허용 여부
STOCKELPER_BACKTEST_ALLOW_FULL_UNIVERSE=false

############################
# Backtest interpretation (LLM post-processing)
############################
# (선택) 해석 전용 모델을 별도로 쓰고 싶으면 지정
STOCKELPER_BACKTESTING_ANALYSIS_MODEL=
BACKTEST_ANALYSIS_HTTP_TIMEOUT=60

############################
# KIS (Korea Investment & Securities)
############################
# 사용자별 kis_app_key/kis_app_secret/account_no/kis_access_token 은
# stockelper_web.users 테이블에서 user_id로 조회/갱신합니다.
KIS_BASE_URL=https://openapivts.koreainvestment.com:29443
KIS_TR_ID_BALANCE=VTTC8434R
KIS_TR_ID_ORDER_BUY=VTTC0802U
KIS_TR_ID_ORDER_SELL=VTTC0011U

# (선택) 종목명→종목코드 매핑은 KIS 종목마스터(mst.zip)에서 로드합니다.
# - 미지정 시: kospi/kosdaq/konex mst.zip 기본 URL 사용
# - 여러 URL은 콤마(,)로 구분
KIS_STOCK_MASTER_URLS=
KIS_STOCK_MASTER_TIMEOUT=30
STOCK_LISTING_USER_AGENT=Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0 Safari/537.36

############################
# Redis (optional)
############################
# 캐싱/세션(현재 src 기본 플로우에서는 미사용)
REDIS_HOST=
REDIS_PORT=
REDIS_AUTH=

############################
# Neo4j (optional)
############################
NEO4J_URI=
NEO4J_USER=
NEO4J_PASSWORD=

############################
# MongoDB (optional)
############################
MONGO_URI=

############################
# Langfuse (optional)
############################
LANGFUSE_ENABLED=false
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=

# ===============
# Stockelper LLM
# ===============
#
# 사용 방법:
#   1) 이 파일을 `.env`로 복사한 뒤 값을 채우세요.
#   2) Docker 사용 시 compose의 env_file(.env)로 로드됩니다.
#

############################
# Server
############################
HOST=0.0.0.0
PORT=21009
DEBUG=false

############################
# Service
############################
STOCKELPER_SERVICE=chat
REQUESTS_TIMEOUT=300
DEBUG_ERRORS=false

############################
# AI / LLM
############################
OPENAI_API_KEY=
# (선택) chat/해석 모델을 통일하려면 이 변수로 지정하세요.
# STOCKELPER_LLM_MODEL=gpt-5.1
# (선택) WebSearch(OpenRouter/Perplexity) 등을 쓸 경우
OPENROUTER_API_KEY=

############################
# External APIs (optional per tool)
############################
OPEN_DART_API_KEY=
YOUTUBE_API_KEY=

############################
# Databases (required)
############################
# stockelper_web DB (사용자/백테스트 결과/해석 저장)
# 예) DATABASE_URL=postgresql://postgres:postgres@54.180.25.182:5432/stockelper_web
DATABASE_URL=postgresql://user:pass@host:5432/stockelper_web

# (선택) 미지정 시 DATABASE_URL을 asyncpg로 자동 변환
ASYNC_DATABASE_URL=

# (선택) LangGraph 체크포인터 DB
# - 미지정 시 DATABASE_URL(=stockelper_web)을 사용합니다.
CHECKPOINT_DATABASE_URI=

# (선택) KSIC(산업분류) DB
ASYNC_DATABASE_URL_KSIC=

# stockelper_web 스키마/테이블
STOCKELPER_WEB_SCHEMA=public
STOCKELPER_BACKTESTING_TABLE=backtesting

############################
# External service URLs
############################
# 백테스팅 서비스(필수: 백테스트 트리거 + 결과 다운로드 + 해석)
# 예) STOCKELPER_BACKTESTING_URL=http://54.180.25.182:21007
STOCKELPER_BACKTESTING_URL=http://localhost:21007

############################
# Backtesting request planner (LLM preflight/guardrails)
############################
# 사용자가 기간을 말하지 않으면 최근 N년으로 기본 설정
STOCKELPER_BACKTEST_DEFAULT_YEARS=3
# 과도한 DB/연산을 막기 위해 최대 기간(년)을 제한(초과 시 자동 축소)
STOCKELPER_BACKTEST_MAX_YEARS=5
# 대상 종목 최대 개수 제한(과도한 요청 방지)
STOCKELPER_BACKTEST_MAX_TARGET_SYMBOLS=50
# (주의) 전체 유니버스 백테스트 허용 여부
STOCKELPER_BACKTEST_ALLOW_FULL_UNIVERSE=false
# (선택) 백테스트 요청 파라미터 생성 모델
STOCKELPER_BACKTESTING_REQUEST_MODEL=

# (선택) 포트폴리오 추천 서비스
STOCKELPER_PORTFOLIO_URL=
PORTFOLIO_REQUESTS_TIMEOUT=300

############################
# Backtest interpretation (LLM post-processing)
############################
# (선택) 해석 전용 모델을 별도로 쓰고 싶으면 지정
STOCKELPER_BACKTESTING_ANALYSIS_MODEL=
BACKTEST_ANALYSIS_HTTP_TIMEOUT=60

# ===============
# Stockelper LLM
# ===============
#
# 사용 방법:
#   1) 이 파일을 `.env`로 복사한 뒤 값을 채우세요.
#   2) Docker 사용 시 compose의 env_file(.env)로 로드됩니다.

# --- LLM / AI ---
OPENAI_API_KEY=
OPENROUTER_API_KEY=

# --- External APIs (optional per tool) ---
OPEN_DART_API_KEY=
YOUTUBE_API_KEY=

# --- Databases ---
# 사용자/자격증명 DB (stockelper_web.users)
# - 운영 EC2 예: postgresql://postgres:postgres@54.180.25.182:5432/stockelper_web
DATABASE_URL=postgresql://postgres:postgres@db:5432/stockelper_web

# (선택) 미지정 시 DATABASE_URL을 asyncpg로 자동 변환
ASYNC_DATABASE_URL=

# LangGraph 체크포인터 DB
# (선택) 미지정 시 DATABASE_URL(=stockelper_web)에 체크포인트 테이블을 생성/사용합니다.
CHECKPOINT_DATABASE_URI=postgresql://postgres:postgres@db:5432/checkpoint

# KSIC(산업분류) DB (선택)
DATABASE_URL_KSIC=postgresql://postgres:postgres@db:5432/ksic
ASYNC_DATABASE_URL_KSIC=postgresql+asyncpg://postgres:postgres@db:5432/ksic

# stockelper_web 스키마 (기본 public)
STOCKELPER_WEB_SCHEMA=public

# --- KIS (Korea Investment & Securities) ---
# 사용자별 kis_app_key/kis_app_secret/account_no/kis_access_token 은
# stockelper_web.users 테이블에서 user_id로 조회/갱신합니다.
KIS_BASE_URL=https://openapivts.koreainvestment.com:29443
KIS_TR_ID_BALANCE=VTTC8434R
KIS_TR_ID_ORDER_BUY=VTTC0802U
KIS_TR_ID_ORDER_SELL=VTTC0011U

# (선택) 종목명→종목코드 매핑은 KIS 종목마스터(mst.zip)에서 로드합니다.
# - 미지정 시: kospi/kosdaq/konex mst.zip 기본 URL 사용
# - 여러 URL은 콤마(,)로 구분
KIS_STOCK_MASTER_URLS=
KIS_STOCK_MASTER_TIMEOUT=30
STOCK_LISTING_USER_AGENT=Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0 Safari/537.36

# --- Redis ---
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_AUTH=myredissecret

# --- Neo4j (optional) ---
NEO4J_URI=
NEO4J_USER=
NEO4J_PASSWORD=

# --- MongoDB (optional) ---
MONGO_URI=

# --- Langfuse (optional) ---
LANGFUSE_ENABLED=false
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=

# --- Service ---
STOCKELPER_SERVICE=chat
STOCKELPER_BACKTESTING_URL=
STOCKELPER_PORTFOLIO_URL=http://portfolio-server:21008
# (선택) 포트폴리오 추천 API 호출 타임아웃(초). 미지정 시 REQUESTS_TIMEOUT 사용
PORTFOLIO_REQUESTS_TIMEOUT=300
REQUESTS_TIMEOUT=300
DEBUG_ERRORS=false


